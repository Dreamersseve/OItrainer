:root{--bg:#f7f7f8;--card:#ffffff;--muted:#666;--accent:#2b6cb0}
body{font-family: "PingFang SC","Microsoft YaHei",Arial,Helvetica,sans-serif;background:var(--bg);margin:0;color:#222}
.container{max-width:1100px;margin:20px auto;padding:16px}
header{background:var(--card);border-radius:8px;padding:16px;box-shadow:0 1px 3px rgba(0,0,0,.06);display:flex;align-items:center;justify-content:space-between;gap:12px}
header h1{margin:0;font-size:18px}
.topline{display:flex;gap:12px;align-items:center}
.panel{background:var(--card);border-radius:8px;padding:12px;margin-top:12px;box-shadow:0 1px 3px rgba(0,0,0,.04)}
.row{display:flex;gap:12px;flex-wrap:wrap}
.col{flex:1;min-width:240px}
.small{font-size:13px;color:var(--muted)}
.btn{background:var(--accent);color:#fff;border:none;padding:8px 12px;border-radius:6px;cursor:pointer}
.btn:disabled{opacity:.5;cursor:not-allowed}
.btn-ghost{background:transparent;border:1px solid #ddd;color:#333;padding:6px 10px;border-radius:6px;cursor:pointer}
ul.list{list-style:none;padding:0;margin:0}
li.item{padding:6px 8px;border-bottom:1px dashed #eee;display:flex;justify-content:space-between;align-items:center}
label.block{display:block;margin:6px 0;font-weight:600}
input[type="number"], select, input[type="text"]{width:100%;padding:6px;border:1px solid #ddd;border-radius:6px}
.muted{color:var(--muted);font-size:13px}
.stat{font-weight:700}
.facility-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:8px}
/* province selection grid */
.prov-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:8px;margin-top:4px}
.prov-btn{background:var(--accent);color:#fff;border:none;padding:8px 12px;border-radius:6px;cursor:pointer}
.prov-btn.selected{box-shadow:0 0 0 2px #333 inset}
/* option card (used in entertainment modal) */
.option-card{transition:all 180ms ease;border:1px solid #e6e6e6;background:#fff}
.option-card:hover{transform:translateY(-3px);box-shadow:0 6px 18px rgba(0,0,0,0.06)}
.option-card.selected{border-color:var(--accent);background:linear-gradient(180deg, rgba(43,108,176,0.03), rgba(43,108,176,0.01));box-shadow:0 6px 20px rgba(43,108,176,0.12);transform:translateY(-2px)}
/* theme swatches */
.theme-swatch{display:inline-block;width:16px;height:16px;border-radius:50%;cursor:pointer;margin-left:4px;border:1px solid #ccc;vertical-align:middle}
body.theme-red{--accent:#e53e3e;--bg:#fff5f5;--card:#ffffff;--muted:#666}
body.theme-green{--accent:#38a169;--bg:#f0fff4;--card:#ffffff;--muted:#666}
body.theme-purple{--accent:#805ad5;--bg:#faf5ff;--card:#ffffff;--muted:#666}
.facility{padding:8px;border-radius:6px;border:1px solid #eee;background:#fafafa;text-align:center}
.fac-label{font-weight:700;margin-bottom:6px}
.fac-action{margin-top:8px}
.btn.upgrade{background:#38a169;color:#fff;padding:6px 8px;font-size:13px;border-radius:6px}
.btn.upgrade.ghost{background:transparent;border:1px solid #ddd;color:#333}
.modal{position:fixed;left:0;top:0;right:0;bottom:0;background:rgba(0,0,0,.45);display:flex;align-items:center;justify-content:center;z-index:999}
.dialog{width:820px;max-width:96%;background:#fff;padding:14px;border-radius:8px;max-height:85vh;overflow:auto}
.dialog h3{margin-top:0}
.flex-between{display:flex;justify-content:space-between;align-items:center}
footer{margin-top:16px;text-align:center;color:var(--muted)}
.tag{display:inline-block;padding:4px 8px;border-radius:999px;background:#eef6ff;color:#1b4f8a;font-size:12px;margin-left:6px}
.warn{color:#b45309}
.status-row{display:flex;gap:12px;flex-wrap:wrap}
.student-box{border:1px solid #eee;padding:6px;border-radius:6px;background:#fff}
.student-box{position:relative;padding-top:24px}
.evict-btn{
	position:absolute;
	top:3px;
	right:3px;
	background:#e53e3e;
	color:#fff;
	border:none;
	padding:2px 6px;
	border-radius:4px;
	font-size:10px;
	cursor:pointer;
	z-index:2;
	box-shadow:0 1px 3px rgba(0,0,0,0.06);
}
.evict-btn:disabled{opacity:.5;cursor:not-allowed}
.score{font-weight:700}
.compact{font-size:13px}
.stars{color:#d97706}
table{width:100%;border-collapse:collapse}
th,td{padding:6px;border:1px solid #eee;text-align:center}
.label-pill{display:inline-block;padding:4px 8px;border-radius:999px;background:#f3f4f6;color:#111;font-size:13px}
.label-pill.pressure-low{background:#e0f7fa;color:#00796b}
.label-pill.pressure-mid{background:#fff9c4;color:#bfa100}
.label-pill.pressure-high{background:#ffebee;color:#c62828}
.highlight-next-comp{background: #fffde7; color: #d84315; padding: 2px 6px; border-radius: 5px; font-weight: bold}
.next-panel{margin-top:8px;padding:8px;border-radius:6px}
.next-panel.normal{background:#fff;border:1px solid #eee}
.next-panel.highlight{background:#fffde7;border:1px solid #ffd29b}

/* 结局高亮与动画样式 */
.ending-highlight{font-weight:800;color:#d84315;display:inline-block;padding:4px 8px;border-radius:6px}
.ending-animate{animation:endingPulse 1.6s ease-in-out 1;}
@keyframes endingPulse{
	0%{ transform: scale(1); box-shadow: 0 0 0 rgba(216,67,21,0); }
	30%{ transform: scale(1.08); box-shadow: 0 6px 18px rgba(216,67,21,0.12); }
	60%{ transform: scale(0.98); box-shadow: 0 2px 8px rgba(216,67,21,0.06); }
	100%{ transform: scale(1); box-shadow: 0 0 0 rgba(216,67,21,0); }
}

/* Action card vertical list */
.action-cards{display:flex;flex-direction:column;gap:8px;margin-top:8px}
.action-card{background:#fff;border:1px solid #eee;border-radius:8px;padding:10px;cursor:pointer;box-shadow:0 1px 2px rgba(0,0,0,.03);display:flex;flex-direction:column}
.action-card:focus,.action-card:hover{box-shadow:0 4px 10px rgba(0,0,0,.06);outline:none}
.action-card .card-title{font-weight:700;margin-bottom:6px}
.action-card .card-desc{font-size:13px;color:var(--muted)}
.action-card.empty{background:#f9fafb;border:1px dashed #eee;color:var(--muted)}

/* 默认不显示空的预留事件卡片（JS 根据事件存在与否切换显示） */
.action-card.empty { display: none; }
.action-card.event-active{ display:flex; border:2px solid var(--accent); box-shadow:0 4px 12px rgba(43,108,176,0.08); background:var(--card); }
.event-slot{margin-top:8px;padding:6px;background:#fff;border-radius:6px;border:1px solid #eee;font-size:13px}
.event-slot p{margin:0}

/* Make sure smaller save button aligns */
.action-cards > div > .btn-ghost{margin-left:0}

/* 突发事件卡片 */
.event-card{border:2px solid var(--accent);border-radius:8px;padding:10px;background:var(--card);box-shadow:0 2px 6px rgba(43,108,176,0.06);margin-top:12px}
.event-card h4{margin:0 0 6px 0}
.event-list{max-height:140px;overflow:auto;padding:6px;border-radius:6px;background:linear-gradient(180deg, rgba(0,0,0,0.01), transparent)}
.event-item{padding:6px;border-bottom:1px dashed #eee;font-size:13px}
.event-item:last-child{border-bottom:none}

/* 事件选项按钮 */
.event-options{display:flex;gap:8px;margin-top:10px;flex-wrap:wrap}
.event-choice-btn{
  padding:6px 14px;
  font-size:13px;
  border:1px solid var(--accent);
  background:linear-gradient(135deg, rgba(43,108,176,0.08), rgba(43,108,176,0.04));
  color:var(--text);
  border-radius:6px;
  cursor:pointer;
  transition:all 0.2s ease;
}
.event-choice-btn:hover{
  background:linear-gradient(135deg, rgba(43,108,176,0.15), rgba(43,108,176,0.08));
  box-shadow:0 2px 6px rgba(43,108,176,0.15);
  transform:translateY(-1px);
}
.event-choice-btn:active{
  transform:translateY(0);
  box-shadow:0 1px 3px rgba(43,108,176,0.1);
}

/* Competition-week mode: only show the '参加比赛' card */
body.comp-week .action-cards .action-card:not(#comp-only-action) {
	display: none;
}

/* Highlighted competition action card */
.comp-highlight{border:2px solid var(--accent);background:linear-gradient(90deg, rgba(43,108,176,0.06), rgba(43,108,176,0.02));box-shadow:0 6px 18px rgba(43,108,176,0.12);}

/* ========== 新比赛系统样式 ========== */
.contest-live-container {
  max-width: 900px;
  margin: 0 auto;
}

.contest-header {
  margin-bottom: 20px;
  padding: 12px;
  background: #f9fafb;
  border-radius: 8px;
}

.time-info {
  font-size: 16px;
  font-weight: 700;
  margin-bottom: 8px;
  color: #333;
}

.progress-bar-container {
  width: 100%;
  height: 20px;
  background: #e5e7eb;
  border-radius: 10px;
  overflow: hidden;
}

.progress-bar {
  height: 100%;
  background: linear-gradient(90deg, #38a169, #48bb78);
  transition: width 0.3s ease;
}

.student-panels {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 12px;
  margin: 16px 0;
}

.student-panel {
  background: #fff;
  border: 1px solid #e5e7eb;
  border-radius: 8px;
  padding: 12px;
  box-shadow: 0 1px 3px rgba(0,0,0,0.04);
}

.student-name {
  font-weight: 700;
  font-size: 15px;
  margin-bottom: 6px;
  color: #1a202c;
}

.student-score {
  font-size: 14px;
  margin-bottom: 4px;
  color: #4a5568;
}

.student-score span {
  font-weight: 700;
  color: #2b6cb0;
}

.student-current-problem {
  font-size: 13px;
  margin-bottom: 8px;
  color: #718096;
}

.student-current-problem span {
  font-weight: 600;
  color: #d97706;
}

.problem-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
  gap: 6px;
  margin-top: 8px;
}

.problem-item {
  background: #f3f4f6;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  padding: 8px 4px;
  text-align: center;
  transition: all 0.2s ease;
}

.problem-item.unattempted {
  background: #f3f4f6;
  border-color: #d1d5db;
}

.problem-item.partial {
  background: #fef3c7;
  border-color: #fbbf24;
}

.problem-item.solved {
  background: #d1fae5;
  border-color: #34d399;
  font-weight: 700;
}

.problem-id {
  font-size: 12px;
  font-weight: 600;
  margin-bottom: 2px;
  color: #374151;
}

.problem-score {
  font-size: 13px;
  font-weight: 700;
  color: #1f2937;
}

.contest-controls {
  margin-top: 16px;
  text-align: center;
}

.contest-controls .btn {
  margin: 0 6px;
  min-width: 80px;
}

/* 比赛结果表格 */
.result-table {
  width: 100%;
  margin: 16px 0;
  border-collapse: collapse;
}

.result-table th,
.result-table td {
  padding: 10px;
  border: 1px solid #e5e7eb;
  text-align: left;
}

.result-table th {
  background: #f3f4f6;
  font-weight: 700;
  color: #374151;
}

.result-table tbody tr:hover {
  background: #f9fafb;
}

/* Modal actions: 统一弹窗底部按钮布局
   - 左下角排列（从用户要求）
   - 按钮间距一致，较小的次要按钮使用 .btn-ghost
*/
.modal-actions{display:flex;gap:8px;justify-content:flex-start;align-items:center;margin-top:12px}
.modal-actions .btn{margin:0}
.modal-actions .btn + .btn{margin-left:6px}

/* 天赋标签样式 */
.student-talents {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
}

.talent-tag {
  position: relative;
  display: inline-block;
  padding: 3px 8px;
  border-radius: 12px;
  font-size: 11px;
  font-weight: 600;
  border: 1px solid;
  cursor: help;
  transition: all 0.2s ease;
}

.talent-tag:hover {
  transform: translateY(-1px);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

/* 天赋提示框 */
.talent-tooltip {
  visibility: hidden;
  opacity: 0;
  position: absolute;
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%) translateY(-4px);
  margin-bottom: 4px;
  padding: 8px 12px;
  background: #1f2937;
  color: #fff;
  font-size: 12px;
  font-weight: 400;
  border-radius: 6px;
  white-space: nowrap;
  z-index: 100;
  pointer-events: none;
  transition: opacity 0.2s ease, visibility 0.2s ease, transform 0.2s ease;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

/* 提示框箭头 */
.talent-tooltip::after {
  content: '';
  position: absolute;
  top: 100%;
  left: 50%;
  transform: translateX(-50%);
  border: 5px solid transparent;
  border-top-color: #1f2937;
}

/* 悬停时显示提示框 */
.talent-tag:hover .talent-tooltip {
  visibility: visible;
  opacity: 1;
  transform: translateX(-50%) translateY(-8px);
}





