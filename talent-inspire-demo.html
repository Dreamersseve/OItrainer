<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>天赋激发功能演示</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f7fa;
            color: #2d3748;
        }
        .container {
            background: white;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 2px 12px rgba(0,0,0,0.08);
        }
        h1 {
            color: #1a202c;
            border-bottom: 3px solid #4a90e2;
            padding-bottom: 12px;
        }
        h2 {
            color: #2d3748;
            margin-top: 32px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .feature-box {
            background: #f7fafc;
            border-left: 4px solid #4a90e2;
            padding: 16px;
            margin: 16px 0;
            border-radius: 4px;
        }
        .feature-box h3 {
            margin-top: 0;
            color: #2c5282;
        }
        .highlight {
            background: #fef5e7;
            padding: 2px 6px;
            border-radius: 3px;
            font-weight: 600;
            color: #d68910;
        }
        .cost {
            background: #ebf8ff;
            padding: 2px 6px;
            border-radius: 3px;
            font-weight: 600;
            color: #2c5282;
        }
        .probability {
            background: #f0fff4;
            padding: 2px 6px;
            border-radius: 3px;
            font-weight: 600;
            color: #276749;
        }
        .warning {
            background: #fff5f5;
            border-left: 4px solid #f56565;
            padding: 12px;
            margin: 16px 0;
            border-radius: 4px;
        }
        .info {
            background: #ebf8ff;
            border-left: 4px solid #4299e1;
            padding: 12px;
            margin: 16px 0;
            border-radius: 4px;
        }
        .steps {
            counter-reset: step-counter;
            list-style: none;
            padding-left: 0;
        }
        .steps li {
            counter-increment: step-counter;
            margin: 12px 0;
            padding-left: 40px;
            position: relative;
        }
        .steps li::before {
            content: counter(step-counter);
            position: absolute;
            left: 0;
            top: 0;
            background: #4a90e2;
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        .example {
            background: #f7fafc;
            padding: 16px;
            border-radius: 8px;
            margin: 16px 0;
            border: 1px solid #e2e8f0;
        }
        .example-title {
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 8px;
        }
        code {
            background: #2d3748;
            color: #68d391;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 16px 0;
        }
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e2e8f0;
        }
        th {
            background: #f7fafc;
            font-weight: 600;
            color: #2d3748;
        }
        .emoji {
            font-size: 1.2em;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>✨ 天赋激发功能说明</h1>
        
        <div class="info">
            <strong>功能概述：</strong>在外出集训时，教练可以选择特定天赋进行激发，参加集训的学生有机会获得这些天赋，从而提升团队的整体实力。
        </div>

        <h2>🎯 功能特点</h2>
        
        <div class="feature-box">
            <h3>💰 费用机制</h3>
            <p>每选择一个天赋进行激发需要额外花费 <span class="cost">¥12,000</span></p>
            <p>总费用 = 集训基础费用 + (激发天赋数量 × ¥12,000)</p>
        </div>

        <div class="feature-box">
            <h3>🎲 概率机制</h3>
            <p>每个参加集训的学生有 <span class="probability">30%</span> 的概率获得每个激发的天赋</p>
            <p>概率独立计算，意味着：</p>
            <ul>
                <li>同一个学生可能获得多个激发天赋</li>
                <li>也可能一个都没获得（运气不好）</li>
                <li>不同学生获得的天赋可能不同</li>
            </ul>
        </div>

        <div class="feature-box">
            <h3>🎨 界面设计</h3>
            <p>天赋激发面板默认<span class="highlight">折叠</span>，点击标题可展开/收起</p>
            <p>天赋卡片样式与开始界面的天赋预览保持一致</p>
            <p>选中的天赋卡片会高亮显示，费用实时更新</p>
        </div>

        <h2>📋 使用步骤</h2>
        
        <ol class="steps">
            <li>在游戏主界面点击<strong>"集训"</strong>操作卡片</li>
            <li>在弹出的模态框中选择<strong>难度</strong>和<strong>地点</strong></li>
            <li>选择<strong>参加集训的学生</strong>（点击学生卡片）</li>
            <li>点击<strong>"✨ 天赋激发"</strong>面板展开天赋选择区域</li>
            <li>点击想要激发的<strong>天赋卡片</strong>（可多选）</li>
            <li>查看<strong>费用预览</strong>，确认经费充足</li>
            <li>点击<strong>"前往"</strong>按钮执行集训</li>
        </ol>

        <h2>💡 使用示例</h2>

        <div class="example">
            <div class="example-title">示例 1：小规模激发</div>
            <table>
                <tr>
                    <th>项目</th>
                    <th>详情</th>
                </tr>
                <tr>
                    <td>参加学生</td>
                    <td>3人</td>
                </tr>
                <tr>
                    <td>选择天赋</td>
                    <td>1个（例如"天赋异禀"）</td>
                </tr>
                <tr>
                    <td>额外费用</td>
                    <td>¥12,000</td>
                </tr>
                <tr>
                    <td>期望结果</td>
                    <td>平均约0.9人获得该天赋（3 × 30%）</td>
                </tr>
            </table>
        </div>

        <div class="example">
            <div class="example-title">示例 2：大规模激发</div>
            <table>
                <tr>
                    <th>项目</th>
                    <th>详情</th>
                </tr>
                <tr>
                    <td>参加学生</td>
                    <td>5人</td>
                </tr>
                <tr>
                    <td>选择天赋</td>
                    <td>3个（例如"天赋异禀"、"稳定发挥"、"自学能力"）</td>
                </tr>
                <tr>
                    <td>额外费用</td>
                    <td>¥36,000（3 × ¥12,000）</td>
                </tr>
                <tr>
                    <td>期望结果</td>
                    <td>
                        • 每个天赋平均被1.5人获得（5 × 30%）<br>
                        • 总共约4.5个天赋实例被分配<br>
                        • 可能有学生获得多个天赋
                    </td>
                </tr>
            </table>
        </div>

        <h2>⚠️ 注意事项</h2>

        <div class="warning">
            <strong>⚠️ 风险提示</strong>
            <ul style="margin: 8px 0;">
                <li>天赋激发是<strong>概率性</strong>的，即使花费了经费，也可能没有学生获得天赋</li>
                <li>学生不会重复获得已拥有的天赋（但仍会计入概率计算）</li>
                <li>建议在经费充足时使用此功能</li>
            </ul>
        </div>

        <div class="info">
            <strong>💡 策略建议</strong>
            <ul style="margin: 8px 0;">
                <li><strong>优先高价值天赋：</strong>选择对比赛成绩影响最大的天赋</li>
                <li><strong>人数优势：</strong>参加人数越多，期望获得天赋的学生数越多</li>
                <li><strong>经费平衡：</strong>在升级设施和天赋激发之间找到平衡</li>
                <li><strong>长期投资：</strong>早期激发的天赋可以在整个赛季中发挥作用</li>
            </ul>
        </div>

        <h2>📊 概率计算</h2>

        <div class="example">
            <div class="example-title">单个学生获得天赋的概率分布</div>
            <p>假设激发了3个天赋，单个学生：</p>
            <ul>
                <li>获得0个天赋的概率：(1-0.3)³ ≈ 34.3%</li>
                <li>获得1个天赋的概率：C(3,1) × 0.3 × 0.7² ≈ 44.1%</li>
                <li>获得2个天赋的概率：C(3,2) × 0.3² × 0.7 ≈ 18.9%</li>
                <li>获得3个天赋的概率：0.3³ ≈ 2.7%</li>
            </ul>
            <p><strong>期望值：</strong>每个学生平均获得 3 × 0.3 = 0.9 个天赋</p>
        </div>

        <h2>🔧 技术实现</h2>

        <div class="example">
            <div class="example-title">代码逻辑（简化版）</div>
            <pre style="background: #2d3748; color: #e2e8f0; padding: 16px; border-radius: 8px; overflow-x: auto;"><code>// 对每个参加集训的学生
for(let student of selectedStudents) {
  // 对每个选择激发的天赋
  for(let talent of inspireTalents) {
    // 30% 概率获得
    if(Math.random() < 0.3) {
      // 检查是否已有该天赋
      if(!student.talents.has(talent)) {
        student.talents.add(talent);
        // 显示成功通知
        showNotification(`${student.name} 获得了天赋「${talent}」！`);
      }
    }
  }
}</code></pre>
        </div>

        <h2>📚 总结</h2>

        <p>天赋激发功能为游戏增加了新的策略深度：</p>
        <ul>
            <li>✅ 提供了一种主动获取天赋的方式</li>
            <li>✅ 增加了经费管理的复杂性</li>
            <li>✅ 为后期冲刺提供了更多可能性</li>
            <li>✅ 保持了游戏的平衡性（通过费用和概率限制）</li>
        </ul>

        <div style="margin-top: 32px; padding-top: 16px; border-top: 1px solid #e2e8f0; text-align: center; color: #718096;">
            <p>祝您在 OI 教练模拟器中取得好成绩！🏆</p>
        </div>
    </div>
</body>
</html>
